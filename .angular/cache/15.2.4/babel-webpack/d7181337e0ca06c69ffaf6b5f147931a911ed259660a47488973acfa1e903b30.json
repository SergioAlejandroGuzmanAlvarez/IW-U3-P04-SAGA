{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/category.service\";\nimport * as i2 from \"../services/producto.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"ionBusqueda\"];\nfunction Tab1Page_ng_container_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const val_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", val_r7.message, \" \");\n  }\n}\nfunction Tab1Page_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, Tab1Page_ng_container_15_div_1_Template, 2, 1, \"div\", 17);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const val_r7 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r1.formProducto.get(\"sku\")) == null ? null : tmp_0_0.hasError(val_r7.type)) && ((tmp_0_0 = ctx_r1.formProducto.get(\"sku\")) == null ? null : tmp_0_0.touched));\n  }\n}\nfunction Tab1Page_ng_container_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const val_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", val_r10.message, \" \");\n  }\n}\nfunction Tab1Page_ng_container_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, Tab1Page_ng_container_18_div_1_Template, 2, 1, \"div\", 17);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const val_r10 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r2.formProducto.get(\"name\")) == null ? null : tmp_0_0.hasError(val_r10.type)) && ((tmp_0_0 = ctx_r2.formProducto.get(\"name\")) == null ? null : tmp_0_0.touched));\n  }\n}\nfunction Tab1Page_ng_container_23_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const val_r13 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", val_r13.message, \" \");\n  }\n}\nfunction Tab1Page_ng_container_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, Tab1Page_ng_container_23_div_1_Template, 2, 1, \"div\", 17);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const val_r13 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r3.formProducto.get(\"price\")) == null ? null : tmp_0_0.hasError(val_r13.type)) && ((tmp_0_0 = ctx_r3.formProducto.get(\"price\")) == null ? null : tmp_0_0.touched));\n  }\n}\nfunction Tab1Page_ion_select_option_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r16 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cat_r16);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(cat_r16.idCategoryBK);\n  }\n}\nfunction Tab1Page_ng_container_27_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const val_r17 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", val_r17.message, \" \");\n  }\n}\nfunction Tab1Page_ng_container_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, Tab1Page_ng_container_27_div_1_Template, 2, 1, \"div\", 17);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const val_r17 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r5.formProducto.get(\"category\")) == null ? null : tmp_0_0.hasError(val_r17.type)) && ((tmp_0_0 = ctx_r5.formProducto.get(\"category\")) == null ? null : tmp_0_0.touched));\n  }\n}\nfunction Tab1Page_ng_container_30_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const val_r20 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", val_r20.message, \" \");\n  }\n}\nfunction Tab1Page_ng_container_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, Tab1Page_ng_container_30_div_1_Template, 2, 1, \"div\", 17);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const val_r20 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r6.formProducto.get(\"stock\")) == null ? null : tmp_0_0.hasError(val_r20.type)) && ((tmp_0_0 = ctx_r6.formProducto.get(\"stock\")) == null ? null : tmp_0_0.touched));\n  }\n}\nexport let Tab1Page = /*#__PURE__*/(() => {\n  class Tab1Page {\n    constructor(catService, prodService, alertController, toastController, modalController, fb) {\n      this.catService = catService;\n      this.prodService = prodService;\n      this.alertController = alertController;\n      this.toastController = toastController;\n      this.modalController = modalController;\n      this.fb = fb;\n      this.updateOrDelete = true;\n      this.isContentLoaded = false;\n      this.isModalOpen = false;\n      this.categorias = [];\n      this.productos = [];\n      this.fProductos = [];\n      this.categorias = catService.getCatego();\n      this.productos = prodService.getProductos();\n      this.fProductos = this.productos;\n      this.formProducto = this.fb.group({\n        sku: [\"\", Validators.required],\n        name: [\"\", Validators.required],\n        description: [\"\"],\n        price: [\"\", Validators.compose([Validators.min(0), Validators.required])],\n        category: [\"\", Validators.required],\n        calification: [\"\"],\n        stock: [\"\", Validators.compose([Validators.required, Validators.min(0)])],\n        photo: [\"\"],\n        promCal: [0]\n      });\n      this.validationMessages = {\n        'sku': [{\n          type: 'required',\n          message: 'SKU required.'\n        }],\n        'name': [{\n          type: 'required',\n          message: 'Name required.'\n        }],\n        'price': [{\n          type: 'required',\n          message: 'Price required.'\n        }, {\n          type: 'min',\n          message: 'Invalid number.'\n        }],\n        'category': [{\n          type: 'required',\n          message: 'Category required.'\n        }],\n        'stock': [{\n          type: 'required',\n          message: 'Stock required.'\n        }, {\n          type: 'min',\n          message: 'Invalid number.'\n        }]\n      };\n    }\n    setOpen(isOpen) {\n      this.isModalOpen = isOpen;\n    }\n    openToAddProduct() {\n      this.setOpen(true);\n      this.updateOrDelete = true;\n    }\n    closeAddModal() {\n      this.updateOrDelete = true;\n      this.formProducto.reset();\n      this.isModalOpen = false;\n      this.presentToast('Operación cancelada', 'danger');\n    }\n    ionViewDidEnter() {\n      this.busqueda.setFocus();\n      this.isContentLoaded = true;\n    }\n    filter(dato) {\n      if (!dato.trim()) {\n        this.fProductos = this.productos;\n        return;\n      }\n      this.fProductos = this.productos.filter(prod => prod.name.toLowerCase().includes(dato.toLowerCase()));\n    }\n    filterProduct(event) {\n      if (event instanceof CustomEvent) {\n        this.filter(event.detail.value);\n      }\n    }\n    newProduct() {\n      if (!this.updateOrDelete) {\n        this.prodService.uploadProduct(this.formProducto.getRawValue());\n      } else if (this.updateOrDelete) {\n        this.prodService.addProduct(this.formProducto.getRawValue());\n        this.presentToast('Producto Agregado', 'success');\n      }\n      this.updateOrDelete = true;\n      this.formProducto.reset();\n      this.isModalOpen = false;\n    }\n    updateProduct(prod) {\n      this.updateOrDelete = false;\n      this.isModalOpen = true;\n      this.formProducto.patchValue(prod);\n    }\n    deleteProduct(prod) {\n      this.confirmationDialog('Estas seguro de borrar el producto: ' + prod.name, () => {\n        this.productos = this.prodService.deleteProducto(prod);\n      });\n    }\n    confirmationDialog(header, handler, dismissFunction) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alertController.create({\n          header,\n          buttons: [{\n            text: 'Cancelar',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: () => {\n              this.presentToast('Operación cancelada', 'warning');\n            }\n          }, {\n            text: 'Confirmar',\n            role: 'confirm',\n            cssClass: 'primary',\n            handler: () => {\n              if (handler) handler();\n              this.presentToast('Operación realizada', 'success');\n            }\n          }]\n        });\n        alert.present();\n        alert.onDidDismiss().then(respuesta => {\n          if (dismissFunction) dismissFunction(respuesta);\n        });\n      });\n    }\n    presentToast(message, color) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const toast = yield this.toastController.create({\n          message,\n          duration: 500,\n          color\n        });\n        toast.present();\n      });\n    }\n  }\n  Tab1Page.ɵfac = function Tab1Page_Factory(t) {\n    return new (t || Tab1Page)(i0.ɵɵdirectiveInject(i1.CategoryService), i0.ɵɵdirectiveInject(i2.ProductoService), i0.ɵɵdirectiveInject(i3.AlertController), i0.ɵɵdirectiveInject(i3.ToastController), i0.ɵɵdirectiveInject(i3.ModalController), i0.ɵɵdirectiveInject(i4.FormBuilder));\n  };\n  Tab1Page.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: Tab1Page,\n    selectors: [[\"app-tab1\"]],\n    viewQuery: function Tab1Page_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.busqueda = _t.first);\n      }\n    },\n    decls: 35,\n    vars: 10,\n    consts: [[3, \"translucent\"], [3, \"fullscreen\"], [\"size\", \"11\"], [\"placeholder\", \"Search\", 3, \"ionChange\"], [\"ionBusqueda\", \"\"], [\"size\", \"1\"], [3, \"formGroup\"], [\"type\", \"text\", \"placeholder\", \"SKU\", \"formControlName\", \"sku\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"placeholder\", \"NAME\", \"formControlName\", \"name\"], [\"type\", \"text\", \"placeholder\", \"DESCRIPTION\", \"formControlName\", \"description\"], [\"type\", \"number\", \"placeholder\", \"PRICE\", \"formControlName\", \"price\"], [\"interface\", \"popover\", \"placeholder\", \"Choose a category\", \"formControlName\", \"category\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"number\", \"placeholder\", \"STOCK\", \"formControlName\", \"stock\"], [\"type\", \"text\", \"placeholder\", \"URL IMAGE\", \"formControlName\", \"photo\"], [\"color\", \"success\", \"expand\", \"full\", 3, \"disabled\", \"click\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"error-message\"], [3, \"value\"]],\n    template: function Tab1Page_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \" List-products \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"ion-content\", 1)(5, \"ion-grid\")(6, \"ion-row\")(7, \"ion-col\", 2)(8, \"ion-searchbar\", 3, 4);\n        i0.ɵɵlistener(\"ionChange\", function Tab1Page_Template_ion_searchbar_ionChange_8_listener($event) {\n          return ctx.filterProduct($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(10, \"ion-col\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"form\", 6)(12, \"ion-list\")(13, \"ion-item\");\n        i0.ɵɵelement(14, \"ion-input\", 7);\n        i0.ɵɵtemplate(15, Tab1Page_ng_container_15_Template, 2, 1, \"ng-container\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-item\");\n        i0.ɵɵelement(17, \"ion-input\", 9);\n        i0.ɵɵtemplate(18, Tab1Page_ng_container_18_Template, 2, 1, \"ng-container\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"ion-item\");\n        i0.ɵɵelement(20, \"ion-input\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"ion-item\");\n        i0.ɵɵelement(22, \"ion-input\", 11);\n        i0.ɵɵtemplate(23, Tab1Page_ng_container_23_Template, 2, 1, \"ng-container\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"ion-item\")(25, \"ion-select\", 12);\n        i0.ɵɵtemplate(26, Tab1Page_ion_select_option_26_Template, 2, 2, \"ion-select-option\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(27, Tab1Page_ng_container_27_Template, 2, 1, \"ng-container\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"ion-item\");\n        i0.ɵɵelement(29, \"ion-input\", 14);\n        i0.ɵɵtemplate(30, Tab1Page_ng_container_30_Template, 2, 1, \"ng-container\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"ion-item\");\n        i0.ɵɵelement(32, \"ion-input\", 15);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(33, \"ion-button\", 16);\n        i0.ɵɵlistener(\"click\", function Tab1Page_Template_ion_button_click_33_listener() {\n          return ctx.newProduct();\n        });\n        i0.ɵɵtext(34, \" Add \");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"translucent\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"formGroup\", ctx.formProducto);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validationMessages[\"sku\"]);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validationMessages[\"name\"]);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validationMessages[\"price\"]);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.categorias);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validationMessages[\"category\"]);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.validationMessages[\"stock\"]);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !ctx.formProducto.valid);\n      }\n    },\n    dependencies: [i3.IonButton, i3.IonCol, i3.IonContent, i3.IonGrid, i3.IonHeader, i3.IonInput, i3.IonItem, i3.IonList, i3.IonRow, i3.IonSearchbar, i3.IonSelect, i3.IonSelectOption, i3.IonTitle, i3.IonToolbar, i3.NumericValueAccessor, i3.SelectValueAccessor, i3.TextValueAccessor, i5.NgForOf, i5.NgIf, i4.ɵNgNoValidate, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName],\n    styles: [\".divContenido[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:5rem;width:100%;padding:1rem 4.5%}#divContenidoHeader[_ngcontent-%COMP%]{margin-left:9%}.pContenidoHijo[_ngcontent-%COMP%]{width:13%;text-align:center}.error-message[_ngcontent-%COMP%]{color:red;text-align:right;padding-right:1rem;font-style:italic;font-size:1rem}ion-avatar[_ngcontent-%COMP%]{--border-radius: 4px}\"]\n  });\n  return Tab1Page;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}